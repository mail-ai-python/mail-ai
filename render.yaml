services:
  # A web service for the auth API, located in the mail-backend directory
  - type: web
    name: auth-service
    env: docker
    # The root of the service, relative to the repo root
    dockerContext: ./mail-backend
    dockerfilePath: ./mail-backend/services/auth_service/DockerFile
    envVars:
      - key: PYTHONPATH
        value: /app

  # A background worker, located in the mail-backend directory
  - type: worker
    name: event-processor
    env: docker
    # The root of the service, relative to the repo root
    dockerContext: ./mail-backend
    dockerfilePath: ./mail-backend/services/event_processor/Dockerfile
    envVars:
      - key: PYTHONPATH
        value: /app
